<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link th:href="@{/css/style.css}" rel="styleSheet">
    <script th:src="@{/js/operatingStatus.js}"></script>
    <title>ユーザー管理画面</title>
</head>
<body>
<div class="header-contents">
    <h2 class="management-h2">ユーザー管理画面</h2>
</div>
<div class="user-info">
    <div class="errorMessages" th:if="${errorMessages != null}">
        <div th:each="errorMessage : ${errorMessages}" th:text="${errorMessages}"></div>
    </div>

    <div class="new-button">
        <a th:href="@{/user/new}">
            <input type="submit" value="新規ユーザー登録"/>
        </a>
    </div>

    <table class="user-table" border="1">
        <caption>ユーザー登録情報一覧</caption>
        <tr>
            <th>編集</th>
            <th>ID<br/><hr>アカウント名</th>
            <th>氏名</th>
            <th>所属</th>
            <th>登録日時<br/><hr>更新日時</th>
            <th>アカウントの状態</th>
        </tr>
        <tr class="user" th:each="user : ${users}">
            <td>
                <a th:href="@{/user/edit/{id}(id=${user.id})}">
                        <input type="button" value="編集"/>
                </a>
            </td>
            <td><!-- ユーザーID・アカウント名表示 -->
                <span th:text="${user.id}"></span><br/>
                <hr>
                <span name="account" th:text="${user.account}"></span>
            </td>
            <td><!-- 氏名表示 -->
                <span name="name" th:text="${user.name}"></span>
            </td>
            <td><!-- 所属表示 -->
                <th:block th:switch="${user.branchId}">
                    <span th:case=1 th:text="本社"></span>
                    <span th:case=2 th:text="A支社"></span>
                    <span th:case=3 th:text="B支社"></span>
                    <span th:case=4 th:text="C支社"></span>
                </th:block><br/>
                <hr>
                <!-- 部署名表示 -->
                <th:block th:switch="${user.departmentId}">
                    <span th:case=1 th:text="総務人事部"></span>
                    <span th:case=2 th:text="情報管理部"></span>
                    <span th:case=3 th:text="営業部"></span>
                    <span th:case=4 th:text="技術部"></span>
                </th:block>
            </td>
            <td>
                <span th:text="${#temporals.format(user.createdDate, 'yyyy/MM/dd HH:mm:ss')}"></span><br/>
                <hr>
                <span th:text="${#temporals.format(user.updatedDate, 'yyyy/MM/dd HH:mm:ss')}"></span>
            </td>
            <td>
                <th:block th:switch="${user.isStopped}">
                    <span th:case=0 th:text="有効"></span>
                    <span th:case=1 th:text="停止中"></span>
                </th:block>
                <span th:if="${loginUser.id != user.id}">
                    <form th:action="@{/change/{id}(id=${user.id})}" th:method="put" onSubmit="return CheckAlter()">
                        <input type="hidden" name="isStopped" value="0"/>
                        <input type="submit" value="有効"/>
                    </form>
                    <form th:action="@{/change/{id}(id=${user.id})}" th:method="put" onSubmit="return CheckAlter()">
                        <input type="hidden" name="isStopped" value="1"/>
                        <input type="submit" value="停止"/>
                    </form>
                </span>
            </td>
        </tr>
    </table>
</div>
<div class="footer-contents">
    <div class="management-return">
        <form th:action="@{/}">
            <input type="submit" value="戻る"/>
        </form>
    </div>
</div>
</body>
</html>